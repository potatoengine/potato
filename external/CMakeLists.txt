set(FMT_TEST OFF CACHE BOOL "enable fmtlib tests")
add_subdirectory(fmt-5.2.0 EXCLUDE_FROM_ALL)

find_library(SDL2_DIR NAMES SDL2 HINTS $ENV{SDL2_DIR})
if(SDL2_DIR)
    message(STATUS "Using system SDL2 at ${SDL2_LIBRARY}")
    add_library(SDL2 IMPORTED)
    target_include_directories(SDL2 INTERFACE ${SDL2_DIR}/include)
    set_target_properties(SDL2 PROPERTIES IMPORTED_LOCATION ${SDL2_DIR}/SDL2.dll)
    add_library(SDL2main IMPORTED)
    set_target_properties(SDL2 PROPERTIES IMPORTED_LOCATION ${SDL2_DIR}/SDL2main.${CMAKE_STATIC_LIBRARY_SUFFIX})
else()
    message(STATUS "Using bundled SDL2")
    set(SDL_STATIC OFF CACHE BOOL "enable sdl2 static lib")
    add_subdirectory(sdl-2.0.9 EXCLUDE_FROM_ALL)
endif()

set(DOCTEST_WITH_TESTS OFF CACHE BOOL "enable doctest tests")
set(DOCTEST_WITH_MAIN_IN_STATIC_LIB OFF CACHE BOOL "enable doctest static lib")
add_subdirectory(doctest-2.2.0 EXCLUDE_FROM_ALL)
